{% load i18n %}

{% block content %}

<style>
    .flex-grow {
        flex: 1;
    }
</style>

<div class="container text-center justify-content-center">
    <div class="row my-5 justify-content-center">
        {% if user_vehicles %}
        {% for vehicle in user_vehicles %}

        <div class="col-sm-4 mb-3">
            <div class="card d-flex flex-column h-100">
                <!-- Unsplash Image as Cover -->
                {# <img src="https://source.unsplash.com/random/250x150/?car" class="card-img-top" alt="Vehicle Image" style="object-fit: cover; width: 100%; height: 150px;"> #}

                {% if vehicle.image %}
                <img src="{{ vehicle.image.url }}" class="card-img-top" alt="Vehicle Image" style="object-fit: cover; width: 100%; height: 150px;">
                {% endif %}

                <div class="card-body flex-grow">
                    <h5 class="card-title">{{ vehicle|default_if_none:"Name?" }}</h5>
                    <p class="card-text">{{ vehicle.make|default_if_none:"Make?" }}, {{ vehicle.model|default_if_none:"Model?" }}, {{ vehicle.year|default_if_none:"Year?" }}, {{ vehicle.fuel_type|default_if_none:"Fuel?" }}</p>
                </div>
                <div class="d-flex justify-content-around mt-auto p-3">
                    <!-- Stats Button -->


                    <a href="{% url 'refuel:vehicle_details' vehicle.id %}" class="btn btn-success">{%trans 'Details'%}</a>

                    <!-- Delete Button -->
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteConfirmModal-{{ vehicle.id }}">
                        <i class="bi bi-trash-fill"></i>{%trans 'Delete'%}
                    </button>
                </div>
            </div>
        </div>

        <div class="modal fade" id="deleteConfirmModal-{{ vehicle.id }}" tabindex="-1" aria-labelledby="deleteConfirmModalLabel-{{ vehicle.id }}" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteConfirmModalLabel-{{ vehicle.id }}">{%trans 'Confirm Deletion'%}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        {%trans 'Are you sure you want to delete this vehicle?'%}
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{%trans 'Cancel'%}</button>
                        <a href="{% url 'refuel:delete_vehicle' vehicle.id %}" class="btn btn-danger">{%trans 'Delete'%}</a>
                    </div>
                </div>
            </div>
        </div>

        {% endfor %}

        {% else %}

        <h2 class="text-center">{%trans 'No vehicles yet.'%}</h2>

        {% endif %}
    </div>
</div>

{% endblock %}